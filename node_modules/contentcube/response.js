exports.decorate = function(response) {
	
	var contentBuffer = "";
	var overridden = {
		write: response.write,
		end: response.end
	};
	
	response.write = function(chunk) {
		contentBuffer += chunk;
	};
	
	response.clear = function() {
		contentBuffer = '';
	};
	
	response.end = function(chunk) {
		overridden.write.call(response, contentBuffer);
		overridden.end.call(response, chunk);
	};
	
	return response;
};