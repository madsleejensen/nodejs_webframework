exports.decorate = function(response) {
	/**
	 * take control over the output, this allows us to build a buffer up and erase it under certain conditions.
	 */
	var outputBuffer = "";
	var overridden = {
		write: response.write,
		end: response.end
	};
	
	/**
	 * Store a chunk of content into the output buffer
	 * @param {String} chunk
	 */
	response.write = function(chunk) {
		outputBuffer += chunk;
	};
	
	response.clear = function() {
		outputBuffer = '';
	};
	
	/**
	 * write out the output buffer to the actual response.
	 * @param {String} chunk
	 */
	response.end = function(chunk) {
		overridden.write.call(response, outputBuffer);
		overridden.end.call(response, chunk);
	};
	
	return response;
};