var Path = require("path");

module.exports = new function loader() {
	var paths = [];
	
	var instance = {};
		instance.addPath = function (path) {
			if (paths.indexOf(path) == -1) {
				paths.push(path);
			}
		};
		
		instance.getModel = function(modelName, moduleName) {
			var relative = "/application/";
			if (moduleName) {
				relative = Path.join(relative, 'modules/', moduleName);
			}
			
			relative = Path.join(relative, 'models/', modelName);
			
			for (var index in paths) {
				var path = paths[index];
				var search = Path.join(path, relative);
				try {
					return require(search);
				}
				catch (e) {}
			}
		};
		
		instance.getViewPath = function(viewName, moduleName) {
			var relative = '/application/';
			if (moduleName) {
				relative = Path.join(relative, 'modules/', moduleName);
			}
			relative = Path.join(relative, 'views', viewName);
			
			return relative;
		};
		
		instance.getPluginsPath = function(moduleName) {
			return "";
		};
		
		instance.get
		
		instance.getModule = function(path) {
			return require(path);
		}
		
	return instance;
};