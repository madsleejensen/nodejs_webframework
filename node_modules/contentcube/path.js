var Path = require("path");

module.exports = function decorate() {
	
	Path.getModel = function(name, moduleName) {
		var absolute = getApplicationPath();
		if (moduleName) {
			absolute = Path.join(absolute, 'modules/', moduleName);
		}
		
		absolute = Path.join(absolute, 'models/', name);
		return absolute;
	};
	
	Path.getView = function(name, moduleName) {
		var absolute = getApplicationPath();
		if (moduleName) {
			absolute = Path.join(absolute, 'modules/', moduleName);
		}
		
		absolute = Path.join(absolute, 'views/', name);
		return absolute;
	};
	
	Path.getPlugin = function(name, moduleName) {
		var absolute = getApplicationPath();
		if (moduleName) {
			absolute = Path.join(absolute, 'modules/', moduleName);
		}
		
		absolute = Path.join(absolute, 'plugins/', name);
		return absolute;
	};
	
	Path.getPluginFolderPath = function(moduleName) {
		
	};
	
	function getBasePath() {
		if (!global.application) {
			throw new Error("Application not initialized, Path.js require global.application to be defined.");
		}
		
		return Path.join(global.application.config.get('system.localPath'), '/application/');
	}
	
	return Path;
};